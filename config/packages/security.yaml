security:
    providers:
        ldap:
            ldap:
                service: Symfony\Component\Ldap\Ldap
                base_dn: '%env(LDAP_BASE_DN)%'
                search_dn: '%env(LDAP_SEARCH_DN)%'
                search_password: '%env(LDAP_SEARCH_PASSWORD)%'
                default_roles: ROLE_USER
                uid_key: '%env(LDAP_UID_KEY)%'

    firewalls:
        # Login-Endpunkt: kein stateless!
        login:
            pattern: ^/api/login
            stateless: false
            custom_authenticators:
                - App\Security\LdapApiAuthenticator

        # Hauptfirewall f√ºr alle anderen Routen
        main:
            lazy: true
            stateless: false
            provider: ldap
            custom_authenticators:
                - App\Security\LdapApiAuthenticator
            logout:
                path: /api/logout
            remember_me:
                secret: '%kernel.secret%'
                lifetime: 604800   # optional: 7 Tage
                path: /
                secure: false      # in dev evtl. deaktivieren
                name: REMEMBERME

    access_control:
        - { path: ^/api/login,      roles: PUBLIC_ACCESS }
